# Material：材质类

所有的材质都在这里定义，它规定了如何生成反射/散射光线

material.h：所有材质的基类，继承它的子类都需要定义散射函数 

scatter：散射函数
- 输入：入射光线
- 输入：接触点信息
- 输出：衰减系数
- 输出：反射/散射光线

lambertian.h：兰伯特模型，漫反射材质
1. 以单位法向量位置，生成一个单位球
2. 然后以球面上的随机一点作为漫反射的散射方向
3. 生成散射光线即可

metal.h：金属材质
1. 根据入射光线的方向和法向量，找到反射光线方向
2. 在反射光线方向，加上一个随机的扰动以生成模糊的效果。可以为这个扰动的效果添加权重
3. 判断改反射光线是否生效，即当反射光线和法向量同向时，才生效

# Hittable：模型光线求交类

它规定了模型和光线，如何求交。所有模型或场景都需要继承它。

hittable.h：所有需要和光线求交的类都需要继承它，它声明了如何计算和光线求交

hit：求交函数
- 输入：入射光线
- 输入：最小时间
- 输入：最大时间
- 输出：相交点的信息

hit_record：相交点的信息
- 相交点位置
- 相交点法向量(通过函数设置)
- 相交点材质
- 相交时间
- 相交点是否在物体内部(通过函数设置)
- set_face_normal：设置法向量和相交点是否在物体内部的函数
  - 输入：入射光线
  - 输入：法向量

sphere.h：球形物体模型
1. 根据相交显式方程和球形隐式方程，解出 t 值
2. 如果不存在 t 值，那么就不相交
3. 从小到大，依次判断求出的两个 t 值。
   - 小于 tmin 或 大于 tmax 的不要
4. 设置相交点的信息
   - 相交时间
   - 相交位置
   - 通过函数，设置相交点法向量和是否在物体内部
   - 设置材质

hittable_list.h：场景，即存储了所有物体。它希望找到所有相交物体中，最先相交的物体。
1. 遍历所有物体
2. 每次都判断物体是否和入射光线是否相交(通过调用物体的相交判断函数)
3. 如果相交
   - 更新时间 tmax，即每次我们都找更近的相交物体
   - 更新相交点信息

# Ray：光线类

用于定义光线类型，和如何生成光线

ray.h：定义了光线的类型
1. 原点
2. 方向

camera.h：定义了摄像机的方向，以及图像的最小整数宽高以及距离，利用了相似三角形，方便计算，便于生成方向

虽然我们都是认为左下角是最小的点，但是我们的像素渲染还是从左上角开始的

1. 输入：横向百分比
2. 输入：纵向百分比

Tool：工具类
=

定义了一些用于计算的工具类，包含了以下内容：
1. vec3.h：三维向量
2. rtweekend.h：随机数等

# main.cpp

整个程序的启动文件

ray_color：
1. 输入：入射光线
2. 输入：场景
3. 输入：当前深度

它用于计算给定光线的返回颜色值，为了防止自相交，可以定义从 t 为 0.001 开始计算。

当有交点时，根据交点的材质生成新的光线，然后递归的找这个光线的颜色

当超出最大深度时，说明此点不可见，设置为黑色

当他没有和物体相交时，我们认为背后有方向光源，即用这个方向光源的光颜色返回即可

main：
1. 设置输出图片的宽高
2. 设置 SSAA 的系数，即每个像素采样 100 次
3. 设置场景的最大递归深度为 50
4. 为场景添加模型，至少需要设置它的位置，大小和材质信息
5. 设置摄像机
6. 遍历场景中的所有像素，生成光线，获取颜色